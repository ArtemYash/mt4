<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>Local Variables</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />






</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" border="0" cellpadding="0" cellspacing="0" style="margin:0; background: #7F90A5 url('gradient_header.png') repeat-x left top; border-bottom: 3px solid #DBE0E5;">
  <tr>
    <td valign="middle">
      <table style="margin: 10px 0" width="100%"  border="0" cellspacing="0" cellpadding="0">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL4/5 Reference </a> / <a class="h_m" href="basis.htm"> Language Basics </a> / <a class="h_m" href="variables.htm"> Variables </a>/ Local Variables
          </td>
          <td align="right" style="white-space: nowrap; padding: 0 10px;">
          <a href="variables.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a><!--
       --><a href="formal.htm"><img style="vertical-align:middle;margin-left: 7px;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>



<div id="help">
<p class="p_H1"><span class="f_H1">Local Variables</span></p>
<p class="p_Text"><span class="f_Text">A variable declared inside a <a href="function.htm" class="topiclink">function</a> is local. The scope of a local variable is limited to the function range inside which it is declared. Local variable can be <a href="initialization.htm" class="topiclink">initialized</a> by outcome of any <a href="expression.htm" class="topiclink">expression</a>. Every call of the function initializes a local variable. Local variables are stored in memory area of the corresponding function.</span></p>
<p class="p_Text"><span class="f_Text" style="font-weight: bold;">Example:</span></p>
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;somefunc()</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;ret_code=0;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;...</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">(ret_code);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text"><a href="variable_scope.htm" class="topiclink">Scope</a> of a variable is a program part, in which a variable can be referred to. Variables declared inside a block (at the internal level), have the <a href="compound.htm" class="topiclink">block</a> as their scope. The block scope start with the variable declaration and ends with the final right brace.</span></p>
<p class="p_Text"><span class="f_Text">Local variables declared in the beginning of a function also have the scope of block, as well as <a href="call.htm#argument" class="topiclink">function parameters</a> that are local variables. Any block can contain variable declarations. If blocks are nested and the <a href="identifiers.htm" class="topiclink">identifier</a> in the external block has the same name as the identifier in the internal block, the external block identifier is hidden, until the operation of the internal block is over.</span></p>
<p class="p_Text"><span class="f_Text" style="font-weight: bold;">Example:</span></p>
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample" style="color: #808080;">//---</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;i=5;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;local&nbsp;variable&nbsp;of&nbsp;the&nbsp;function</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;i=10;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;function&nbsp;variable</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Inside&nbsp;block&nbsp;i&nbsp;=&nbsp;&quot;</span><span class="f_CodeExample">,i);&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;result&nbsp;is&nbsp;&nbsp;i=10;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Outside&nbsp;block&nbsp;i&nbsp;=&nbsp;&quot;</span><span class="f_CodeExample">,i);&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;result&nbsp;is&nbsp;&nbsp;i=5;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">This means that while the internal block is running, it sees values of its own local identifiers, not the values of identifiers with identical names in the external block.</span></p>
<p class="p_Text"><span class="f_Text" style="font-weight: bold;">Example:</span></p>
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample" style="color: #808080;">//---</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;i=5;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;local&nbsp;variable&nbsp;of&nbsp;the&nbsp;function</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;i=0;i&lt;3;i++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Inside&nbsp;for&nbsp;i&nbsp;=&nbsp;&quot;</span><span class="f_CodeExample">,i);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Outside&nbsp;the&nbsp;block&nbsp;i&nbsp;=&nbsp;&quot;</span><span class="f_CodeExample">,i);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">/*&nbsp;Execution&nbsp;result</span>
<br><span class="f_CodeExample">Inside&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">&nbsp;i&nbsp;=&nbsp;0</span>
<br><span class="f_CodeExample">Inside&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">&nbsp;i&nbsp;=&nbsp;1</span>
<br><span class="f_CodeExample">Inside&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">&nbsp;i&nbsp;=&nbsp;2</span>
<br><span class="f_CodeExample">Outside&nbsp;block&nbsp;i&nbsp;=&nbsp;5</span>
<br><span class="f_CodeExample">*/</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Local variables declared as <a href="static.htm" class="topiclink">static</a> have the scope of the block, despite the fact that they exist since the program start.</span></p>
<p class="p_H2"><a name="stack" class="hmanchor"></a><span class="f_H2">Stack</span></p>
<p class="p_Text"><span class="f_Text">In every MQL4 program, a special memory area called stack is allocated for storing local function variables that are created automatically. One stack is allocated for all functions. The default stack size is 256 kb, the stack size can be managed using the <a href="compilation.htm" class="topiclink">#property stacksize</a> compiler directive.</span></p>
<p class="p_Text"><span class="f_Text"><a href="static.htm" class="topiclink">Static</a> local variables are stored in the same place where other static and <a href="global.htm" class="topiclink">global</a> variables are stored - in a special memory area, which exists separately from the stack. <a href="object_live.htm" class="topiclink">Dynamically</a> created variables also use a memory area separate from the stack.</span></p>
<p class="p_Text"><span class="f_Text">With each function call, a place on the stack is allocated for internal non-static variables. After exiting the function, the memory is available for use again.</span></p>
<p class="p_Text"><span class="f_Text">If from the first function the second one is called, then the second function occupies the required size from the remaining stack memory for its variables. Thus, when using included functions, stack memory will be sequentially occupied for each function. This may lead to a shortage of memory during one of the function calls, such a situation is called stack overflow.</span></p>
<p class="p_Text"><span class="f_Text">Therefore, for large local data you should better use dynamic memory - when entering a function, allocate the memory, which is required for local needs, in the system (<a href="newoperator.htm" class="topiclink">new</a>, <a href="arrayresize.htm" class="topiclink">ArrayResize()</a>), and when exiting the function, release the memory (<a href="deleteoperator.htm" class="topiclink">delete</a>, <a href="arrayfree.htm" class="topiclink">ArrayFree()</a>).</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">See also</span></p>
<p class="p_SeeAlso"><span class="f_SeeAlso"><a href="types.htm" class="topiclink">Data Types</a>, <a href="incapsulation.htm" class="topiclink">Encapsulation and Extensibility of Types</a>,<a href="initialization.htm" class="topiclink">Initialization of Variables</a>, <a href="variable_scope.htm" class="topiclink">Visibility Scope and Lifetime of Variables</a>, <a href="object_live.htm" class="topiclink">Creating and Deleting Objects</a></span></p>

<br>
</div>
</body>
</html>
